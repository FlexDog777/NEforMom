<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<!-- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ç–µ–≥ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–° –ù–æ–≤—ã–º –≥–æ–¥–æ–º, –ª—é–±–∏–º–∞—è –º–∞–º–∞! ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">

<style>
:root {
    --primary-color: #d63384;
    --bg-gradient: linear-gradient(135deg, #fceaf0 0%, #f9d1d1 100%);
    --page-bg: #ffffff;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
    margin: 0;
    height: 100vh;
    background: var(--bg-gradient);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Montserrat', sans-serif;
    overflow: hidden;
    touch-action: manipulation;
}

.snow {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
    z-index: 100;
}

/* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–Ω–∏–≥–∏ */
.book {
    position: relative;
    width: 90vw;
    max-width: 350px;
    height: 70vh;
    max-height: 500px;
    perspective: 1500px;
}

.page {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    transform-origin: left;
    transform-style: preserve-3d;
    transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1);
    z-index: 5;
}

.front, .back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    padding: 25px; /* –£–º–µ–Ω—å—à–∏–ª –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
    border-radius: 10px 20px 20px 10px;
    box-shadow: inset 3px 0px 20px rgba(0,0,0,0.1), 10px 10px 30px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: var(--page-bg);
    overflow: hidden;
}

.back {
    transform: rotateY(180deg);
    background: #fffafa;
}

h1 {
    font-family: 'Caveat', cursive;
    color: var(--primary-color);
    font-size: 28px; /* –ß—É—Ç—å –º–µ–Ω—å—à–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
    margin-bottom: 15px;
    text-align: center;
}

p {
    font-size: 16px;
    color: #555;
    line-height: 1.4;
    text-align: center;
}

.heart {
    font-size: 40px;
    color: #e91e63;
    animation: pulse 1.5s infinite;
    margin: 10px 0;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

button {
    margin-top: 20px;
    padding: 12px 20px;
    border: 2px solid var(--primary-color);
    background: transparent;
    color: var(--primary-color);
    border-radius: 25px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
}

.flipped {
    transform: rotateY(-180deg);
    z-index: 10 !important;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–æ–≤ –∏ –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
@media (min-width: 768px) {
    .book { max-width: 400px; max-height: 550px; }
    h1 { font-size: 38px; }
    p { font-size: 18px; }
    .front, .back { padding: 40px; }
}

#p1 { z-index: 5; }
#p2 { z-index: 4; }
#p3 { z-index: 3; }
#p4 { z-index: 2; }
#p5 { z-index: 1; }

#timer {
    font-size: 18px;
    font-weight: bold;
    color: #333;
    background: #ffeef2;
    padding: 10px;
    border-radius: 10px;
    margin-top: 15px;
}

.music-control {
    position: fixed;
    bottom: 15px;
    right: 15px;
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background: white;
    border: none;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    z-index: 1000;
    font-size: 20px;
}
</style>
</head>
<body>

<canvas class="snow" id="snowCanvas"></canvas>

<audio id="bgMusic" loop>
    <source src="song.mp3" type="audio/mpeg">
</audio>

<button class="music-control" onclick="toggleMusic()" id="musicBtn">üîá</button>

<div class="book">
    <div class="page" id="p1">
        <div class="front">
            <h1>–ú–∞–º–µ <br>—Å –ª—é–±–æ–≤—å—é...</h1>
            <div class="heart">‚ù§Ô∏è</div>
            <p id="lockMessage">–ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É,<br>—á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø–æ–¥–∞—Ä–æ–∫</p>
            <button onclick="flip(1)">–û—Ç–∫—Ä—ã—Ç—å ‚ûú</button>
        </div>
        <div class="back">
            <h1>–î–ª—è —Ç–µ–±—è...</h1>
            <p>–Ø –∑–∞–∫–æ–¥–∏–ª —ç—Ç—É –æ—Ç–∫—Ä—ã—Ç–∫—É —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–±—è, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –≤—Å—ë —Å–≤–æ—ë —Ç–µ–ø–ª–æ.</p>
        </div>
    </div>

    <div class="page" id="p2">
        <div class="front">
            <h1>–ú–æ—è –æ–ø–æ—Ä–∞</h1>
            <p>–°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–≤–æ—é –¥–æ–±—Ä–æ—Ç—É. –¢—ã –≤—Å–µ–≥–¥–∞ –≤–µ—Ä–∏—à—å –≤ –º–µ–Ω—è!</p>
            <button onclick="flip(2)">–î–∞–ª—å—à–µ ‚ûú</button>
        </div>
        <div class="back">
            <h1>–¢–≤–æ–µ —Ç–µ–ø–ª–æ</h1>
            <p>–ü—É—Å—Ç—å –≤ –Ω–∞—à–µ–º –¥–æ–º–µ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —É—é—Ç–Ω–æ –∏ —Ä–∞–¥–æ—Å—Ç–Ω–æ.</p>
        </div>
    </div>

    <div class="page" id="p3">
        <div class="front">
            <h1>–ñ–µ–ª–∞—é —Ç–µ–±–µ</h1>
            <p>–£–ª—ã–±–æ–∫, –∫—Ä–µ–ø–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è –∏ —Ç–æ–ª—å–∫–æ –¥–æ–±—Ä—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π –≤ –Ω–æ–≤–æ–º –≥–æ–¥—É!</p>
            <button onclick="flip(3)">–î–∞–ª—å—à–µ ‚ûú</button>
        </div>
        <div class="back">
            <h1>–°–∏—è–π!</h1>
            <p>–ü—É—Å—Ç—å –∏—Å–ø–æ–ª–Ω—è—Ç—Å—è —Ç–≤–æ–∏ —Å–∞–º—ã–µ –∑–∞–≤–µ—Ç–Ω—ã–µ –º–µ—á—Ç—ã.</p>
        </div>
    </div>

    <div class="page" id="p4">
        <div class="front">
            <h1>–ü–æ—á—Ç–∏ –ø—Ä–∏—à–ª–æ...</h1>
            <p>–ó–∞–≥–∞–¥–∞–π –∂–µ–ª–∞–Ω–∏–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!</p>
            <button onclick="flip(4)">–£–∑–Ω–∞—Ç—å –≤—Ä–µ–º—è ‚ûú</button>
        </div>
        <div class="back">
            <h1>–õ—é–±–ª—é —Ç–µ–±—è!</h1>
            <p>–Ø –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º. –° –Ω–∞—Å—Ç—É–ø–∞—é—â–∏–º!</p>
        </div>
    </div>

    <div class="page" id="p5">
        <div class="front">
            <h1>–î–æ –ù–æ–≤–æ–≥–æ –≥–æ–¥–∞:</h1>
            <div id="timer">...</div>
            <p style="margin-top: 15px; font-size: 14px;">–¢–≤–æ–π —Å—ã–Ω ‚ù§Ô∏è</p>
        </div>
        <div class="back"></div>
    </div>
</div>

<script>
const music = document.getElementById('bgMusic');
const musicBtn = document.getElementById('musicBtn');
let isMusicPlaying = false;

function flip(id) {
    const now = new Date();
    const unlockDate = new Date(2026, 0, 1, 0, 0, 0);

    if (now < unlockDate && id === 1) {
        alert("–¢–µ—Ä–ø–µ–Ω–∏–µ, –º–∞–º—É–ª—å! ‚ù§Ô∏è –ü–æ–¥–∞—Ä–æ–∫ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Ä–æ–≤–Ω–æ –≤ –ø–æ–ª–Ω–æ—á—å!");
        return;
    }

    const page = document.getElementById('p' + id);
    page.classList.add('flipped');
    
    if (!isMusicPlaying) startMusic();

    setTimeout(() => { page.style.zIndex = id; }, 500);
}

function startMusic() {
    music.play().then(() => {
        isMusicPlaying = true;
        musicBtn.innerText = 'üîä';
    }).catch(e => console.log("–ú—É–∑—ã–∫–∞ –∂–¥–µ—Ç –∫–ª–∏–∫–∞"));
}

function toggleMusic() {
    if (isMusicPlaying) { music.pause(); musicBtn.innerText = 'üîá'; }
    else { music.play(); musicBtn.innerText = 'üîä'; }
    isMusicPlaying = !isMusicPlaying;
}

function updateTimer() {
    const now = new Date();
    const nextYear = new Date(2026, 0, 1, 0, 0, 0); 
    const diff = nextYear - now;

    if (diff <= 0) {
        document.getElementById('timer').innerHTML = "–° –ù–û–í–´–ú –ì–û–î–û–ú! ü•Ç";
        if(document.getElementById('lockMessage')) document.getElementById('lockMessage').innerHTML = "–£—Ä–∞! –û—Ç–∫—Ä—ã–≤–∞–π! üéÑ";
        return;
    }

    const d = Math.floor(diff / (1000 * 60 * 60 * 24));
    const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const m = Math.floor((diff / (1000 * 60)) % 60);
    const s = Math.floor((diff / 1000) % 60);
    document.getElementById('timer').innerHTML = `${d}–¥ ${h}—á ${m}–º ${s}—Å`;
}
setInterval(updateTimer, 1000);
updateTimer();

// –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–Ω–µ–≥
const canvas = document.getElementById('snowCanvas');
const ctx = canvas.getContext('2d');
let width, height, snowflakes;

function initSnow() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
    snowflakes = Array.from({ length: window.innerWidth < 500 ? 40 : 80 }, () => ({
        x: Math.random() * width,
        y: Math.random() * height,
        r: Math.random() * 3 + 1,
        d: Math.random() * 1
    }));
}

function drawSnow() {
    ctx.clearRect(0, 0, width, height);
    ctx.fillStyle = "white";
    ctx.beginPath();
    snowflakes.forEach(f => {
        ctx.moveTo(f.x, f.y);
        ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
    });
    ctx.fill();
    snowflakes.forEach(f => {
        f.y += Math.pow(f.d, 2) + 1;
        f.x += Math.sin(f.y / 50);
        if (f.y > height) { f.y = -10; f.x = Math.random() * width; }
    });
    requestAnimationFrame(drawSnow);
}

window.addEventListener('resize', initSnow);
initSnow();
drawSnow();
</script>

</body>
</html>